{% extends 'base.html.twig' %}

{% block title %}Hello ActionsController!
{% endblock %}
{% block javascripts %}
	{{ parent() }}

	<script>
		const searchIcon = document.querySelector('#search-icon');
const searchForm = document.querySelector('#search-form');

searchIcon.addEventListener('click', () => {
searchForm.classList.toggle('d-none');
searchIcon.classList.toggle('d-none')
});
	</script>
{% endblock %}

{% block body %}

	{# Navbar #}

	<nav class="navbar navbar-expand-lg bg-body-tertiary">
		<div class="d-flex justy-content-center w-100" id="">
			<ul class="navbar-nav me-auto mb-2 mb-lg-0 w-100 d-flex justify-content-center align-items-center">
				<li>
					<a href="/">
						<img class="logo me-2" src="{{ asset('img/logo.png')}}" width alt="">	</img>
					</a>
				</li>


				<li class="nav-item me-2 meltingphot">
					<a class="nav-link active" aria-current="page" href="/">MELTINGPHOT</a>
				</li>
				<li class="nav-item me-2">
					<a class="nav-link" href="/actions">ACTIONS</a>
				</li>
				{# <li class="nav-item dropdown me-2">
					<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						POUR QUI ?
					</a>
				</li> #}
				{# <li class="nav-item me-2">
					<a class="nav-link" href="#">PARTENAIRES</a>
				</li>

				<li class="nav-item me-2">
					<a class="nav-link" href="#">NOUS SOUTENIR</a>
				</li> #}

				<li class="nav-item me-2">
					<a class="nav-link" href="/contact">CONTACT</a>
				</li>

				{% if not app.user %}
					<li class="nav-item me-2">
						<a class="nav-link" href="/login">
							<i class="fa-solid fa-user"></i>
						</a>

					</li>
				{% endif %}
				{% if app.user %}
					{% if 'ROLE_SUPER_ADMIN' in app.user.roles %}
						<a class="nav-link" href="{{ path('admin_') }}">Ma Page Admin</a>
					{% endif %}
				{% endif %}

				{% if app.user %}
					<li class="nav-item me-2">
						<a class="nav-link" href="/logout">Se déconnecter</a>
					</li>
				{% endif %}
				<div class="d-flex align-items-center">
					<i id="search-icon" class="fa-solid fa-magnifying-glass mx-3"></i>
					<form id="search-form" class="d-none">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Rechercher...">
							<button class="btn btn-primary" type="submit">Rechercher</button>
						</div>
					</form>
				</div>
				{% if app.user %}
					<p class="text-end btn btn-warning mt-3">Bienvenue, {{ app.user.username }} !</p>
				{% endif %}

				{% if not app.user %}
					<li class="nav-item me-2">
						<a class="nav-link" href="/new-account">S'inscrire</a>
					</li>
				{% endif %}



				{# <form class="d-flex nav-items me-2 form" role="search">
					<input class="form-control me-2 search" type="search" placeholder="Ma recherche..." aria-label="Search">
					<button class="btn btn-outline-success search-btn" type="submit">Rechercher</button>
				</form>

				<li class="nav-item ">
					<a id="language-link" class="p-2" href="/en">
						<img class="flag" src="{{ asset('img/eng.png') }}">
					</a>
				</li> 

				<li class="nav-item ms-2">
					<a id="language-link" class="p-2" href="/fr">
						<img id="flag" src="{{ asset('img/drapeau.png') }}">
					</a>
				</li> #}
			</ul>
		</div>
	</nav> 

	<section class="actions-bandeau w-100 bg-secondary-subtle h-400 d-flex flex-column justify-content-center align-items-center p-1">
		<article class="actions-bloc">
			<div class="container d-lg-flex flex-lg-row justify-content-lg-center align-items-lg-center">
				<div class="col-lg-4">
					<h1>Nos Actions</h1>
					<div class="d-flex flex-row justify-content-around align-items-center actions-bandeau_sous-titre m-auto">
						<div class="actions-bandeau_trait"></div>
						<div>
							<span class="color-grey">MeltingPhot/</span>
							<span class="color1">Vidéos</span>
						</div>
					</div>
				</div>
				<p class="col-lg-8 mt-5 m-lg-0 text-justify">Lorem, ipsum dolor sit amet consectetur adipisicing elit. Ipsam voluptate quidem ullam beatae vero excepturi fuga deserunt aperiam. Eius repudiandae laborum accusantium voluptatem illum odio impedit delectus expedita beatae laboriosam!</p>
			</div>
		</article>
	</section>


	<div class="d-flex flex-column align-items-center justify-content-center bloc-filtres carousel-container">
		<h2 for="my-dropdown" class="text-center fw-light">NOS
			<span class="fw-bold">ACTIONS D'EDUCATION
			</span>PAR L'IMAGE</h2>

		<div class="d-flex flex-wrap align-items-center justify-content-center ">
			{# quand je clique sur le filme mon futur metier affiche les videos correspondantes a cette categorie  #}
			<a href="{{ path('app_actions', { 'order': 'test', 'year': 'null', 'category': 'Je_Filme_Mon_Futur_Métier' }) }}" class="btn col-6 col-sm-2" id="video-link">Je Filme mon futur métier</a>
			<button class="btn col-6 col-sm-2">Odonymes</button>
			<button class="btn col-6 col-sm-2 ">Les Critiques pétillantes</button>
			<button class="btn col-6 col-sm-2 ">Parole Public</button>
			<button class="btn col-6 col-sm-2 ">Les Vitrines des Cévennes</button>
		</div>

		<div id="carouselExampleIndicators" class="carousel-actions slide carrousel-color">
			<div class="carousel-inner">
				{% for i in 0..(videos|length / 2 - 1) %}
					<div class="carousel-item {% if i == 0 %}active{% endif %}" style="height: 700px;">
						<div class="carousel-indicators">
							{% for i in 0..(videos|length / 2 - 1) %}
								<button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{ i }}" {% if i == 0 %} class="active" aria-current="true" {% endif %} aria-label="Slide {{ i+1 }}"></button>
							{% endfor %}
						</div>
						<div class="d-flex w-100 justify-content-center">
							<div class="col-3 extremity p-0 d-none d-xxl-flex">
								<img class="carousel_img w-100" src="{{ asset('img/ODONYMES _Image_Vignette_Page accueil meltingphot_je Filme mon futur métier.png')}}" alt="...">
							</div>
							{% for j in 0..1 %}
								{% set videoIndex = i * 2 + j %}
								{% if videoIndex < videos|length %}
									{% if loop.index == 1 %}
										<div class="bloc-img-btn col-4 col-sm-6 col-md-6 d-flex p-0 img-1">
											<img class="carousel_img w-100" src="{{ asset('img/Je filme mon futur métier Meltingphot_Image_Vignette_Page accueil meltingphot_je Filme mon futur métier.png')}}" alt="...">
											<button type="button" class="btn btn-primary videos-btn deleted-video btn-1" data-bs-toggle="modal" data-bs-target="#videoModal{{ videoIndex + 1}}">
												<i class="bi bi-play-circle"></i>
												En voir plus ...
											</button>
										</div>
									{% elseif loop.index == 2 %}
										<div class="bloc-img-btn col-4 col-sm-6 col-md-6 d-flex p-0 img-2">
											<img class="carousel_img w-100" src="{{ asset('img/Je filme mon futur métier Meltingphot_Image_Vignette_Page accueil meltingphot_je Filme mon futur métier.png')}}" alt="...">
											<button type="button" class="btn btn-primary videos-btn deleted-video btn-2" data-bs-toggle="modal" data-bs-target="#videoModal{{ videoIndex + 1}}">
												<i class="bi bi-play-circle"></i>
												En voir plus ...
											</button>
										</div>
									{% endif %}
								{% endif %}
							{% endfor %}
							<div class="col-3 extremity p-0 d-none d-xxl-flex">
								<img class="carousel_img w-100" src="{{ asset('img/ODONYMES _Image_Vignette_Page accueil meltingphot_je Filme mon futur métier.png')}}" alt="...">
							</div>
						</div>
					</div>
				{% endfor %}
			</div>



			{% for video in videos %}
				<div class="modal fade" id="videoModal{{ loop.index }}" tabindex="-1" aria-labelledby="videoModal{{ loop.index }}Label" aria-hidden="true">
					<div class="modal-dialog modal-lg modal-dialog-centered">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title" id="videoModal{{ loop.index }}Label">{{ video.name }}</h5>
								<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
							</div>
							<div class="modal-body">
								<div class="embed-responsive embed-responsive-16by9">
									<iframe class="embed-responsive-item w-100 modal-video" src="{{ video.url }}?rel=0" allowfullscreen allow="autoplay"></iframe>
								</div>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}


			<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>
	</div>


	<div class="d-flex justify-content-center flex-wrap bloc-videos p-1" id="video-container"></div>


	<footer class="text-center text-lg-start bg-light text-muted w-100">
		<section class="p-4 border-top">
			<div
				class="text-center text-md-start mt-5">
				<!-- Grid row -->
				<div class="row mt-3 d-flex">
					<div
						class="d-flex justify-content-center">
						<!-- Links -->
						<img src="{{ asset('img/logo.png')}}" class="fw-bold mb-4"></img>
				</div>
				<!-- Grid column -->
				<div class="d-flex justify-content-center ">
					<p class="text-contact">MELTINGPHOT est un acteur important sur le territoire en mennant des projets d'éducations par l'image auprès des associations, collectivités et entreprises.</p>
				</div>
				<div class="d-flex justify-content-center mb-3">
					<a href="https://www.facebook.com/MeltingPhot/?locale=fr_FR" class="me-4 text-reset">
						<i class="fab fa-facebook-f"></i>
					</a>
					<a href="https://twitter.com/melting_phot?lang=fr" class="me-4 text-reset">
						<i class="fab fa-twitter"></i>
					</a>
					<a href="https://www.instagram.com/meltingphot/?hl=fr" class="me-4 text-reset">
						<i class="fab fa-instagram"></i>
					</a>
					<a href="https://www.linkedin.com/company/meltingphot" class="me-4 text-reset">
						<i class="fab fa-linkedin"></i>
					</a>
				</div>
			</div>
		</div>
		<!-- Grid column -->
		<div
			class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4 contact-2">
			<!-- Links -->
			<p>
				<i class="fas fa-home me-3"></i>15 Route de bagnols, 30100 Alès</p>
			<p>
				<i class="fas fa-envelope me-3"></i>info@example.com</p>
			<p>
				<i class="fas fa-phone me-3"></i>06 64 21 93 75</p>
		</div>
		<div
			class="info-contact2 ">
			<!-- Links -->
			<p class="ms-3">
				<i class="fas fa-home me-2"></i>15 Route de bagnols, 30100 Alès</p>
			<p class="ms-3">
				<i class="fas fa-envelope me-2"></i>info@example.com</p>
			<p class="ms-3">
				<i class="fas fa-phone me-2"></i>06 64 21 93 75</p>
		</div>
	</section>
	<!-- Section: Links  -->
	<!-- Copyright -->
	<div class="text-center p-4 fw-bold text-white d-flex flex-column align-items-center" style="background-color: #D00A4B;">
		<a>Tous droits réservés © 2023 @MeltingPhot</a>
		<p class="fst-italic fw-light fs-6 text-white copyright-text">En effet, tous les éléments présents sur Internet (textes, images, vidéos, extraits sonores, codes informatiques…)
																																																																																																																																																																																																																																																																																																																																																																																																																																																			sont de facto soumis au droit d’auteur, même si l’accès est libre, gratuit et sans mention particulière.</p>
	</div>
	<!-- Copyright -->
</footer>
<script>
	document.getElementById("my-dropdown2").addEventListener("change", function () {
var option = this.options[this.selectedIndex];
if (option.value == "option-3") {
window.location.href = "/actions/2022";
}
});

document.getElementById("my-dropdown2").addEventListener("change", function () {
var option = this.options[this.selectedIndex];
if (option.value == "option-2") {
window.location.href = "/actions/2023";
}
});


// Modal
const myModal = document.getElementById('myModal')
const myInput = document.getElementById('myInput')

myModal.addEventListener('shown.bs.modal', () => {
myInput.focus()
})


const videos = document.getElementById('video-container');
videos.style.display = 'none';

const link = document.getElementById('video-link');
link.addEventListener('click', (event) => {
event.preventDefault(); // Prevents navigation to the link

if (videos.style.display === 'none') {
videos.style.display = 'flex'; // Show the videos
} else {
videos.style.display = 'none'; // Hide the videos
}
});

// deleted video

// Sélectionnez tous les boutons avec la classe 'deleted-video'
const deletedVideos = document.querySelectorAll('.deleted-video');

// Parcourez chaque bouton et vérifiez le texte à l'intérieur
deletedVideos.forEach((button) => {
const buttonText = button.innerText.trim();

// Vérifiez si le texte est "Deleted video"
if (buttonText === 'Deleted video') { // Masquez le bouton en ajoutant la classe 'd-none'
button.classList.add('d-none');
}
});
</script>{% endblock %}
